{"ast":null,"code":"import _toConsumableArray from\"/Users/alex/Downloads/GITHUB/testFront/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/alex/Downloads/GITHUB/testFront/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{CartActions}from'../actions/CartActions';export var initialState={items:[],totalItems:0,totalPrice:0};export var initializer=function initializer(){var initialState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;return JSON.parse(localStorage.getItem('cart'))||initialState;};export var cartReducer=function cartReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var _ref=arguments.length>1?arguments[1]:undefined,type=_ref.type,payload=_ref.payload;switch(type){case CartActions.APPEND_ITEM:{var newItems=state.items.find(function(item){return item._id===payload.item._id;})?state.items.map(function(item){return item._id===payload.item._id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity+payload.increment}):item;}):[].concat(_toConsumableArray(state.items),[_objectSpread(_objectSpread({},payload.item),{},{quantity:1})]);var totalPrice=newItems.reduce(function(total,_ref2){var price=_ref2.price,quantity=_ref2.quantity;return total+price*quantity;},0);return _objectSpread(_objectSpread({},state),{},{items:newItems,totalItems:state.totalItems+payload.increment,totalPrice:totalPrice});}case CartActions.DECREMENT_ITEM:{var items=state.items.find(function(item){return item._id===payload.item._id;}).quantity===1?state.items.filter(function(item){return item._id!==payload.item._id;}):state.items.map(function(item){return item._id===payload.item._id?_objectSpread(_objectSpread({},item),{},{quantity:item.quantity-payload.decrement}):item;});var _totalPrice=items.reduce(function(total,_ref3){var price=_ref3.price,quantity=_ref3.quantity;return total+price*quantity;},0);return _objectSpread(_objectSpread({},state),{},{items:items,totalPrice:_totalPrice,totalItems:state.totalItems-payload.decrement});}case CartActions.REMOVE_ITEM:{var itemFound=state.items.find(function(item){return item._id===payload._id;});var _items=state.items.filter(function(item){return item._id!==payload._id;});var _totalPrice2=_items.reduce(function(total,_ref4){var price=_ref4.price,quantity=_ref4.quantity;return total+price*quantity;},0);return _objectSpread(_objectSpread({},state),{},{items:_items,totalItems:state.totalItems-itemFound.quantity,totalPrice:_totalPrice2});}case CartActions.CLEAR_CART:return initialState;default:return state;}};","map":{"version":3,"sources":["/Users/alex/Downloads/GITHUB/testFront/frontend/src/context/reducer/cartReducer.js"],"names":["CartActions","initialState","items","totalItems","totalPrice","initializer","JSON","parse","localStorage","getItem","cartReducer","state","type","payload","APPEND_ITEM","newItems","find","item","_id","map","quantity","increment","reduce","total","price","DECREMENT_ITEM","filter","decrement","REMOVE_ITEM","itemFound","CLEAR_CART"],"mappings":"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","sourcesContent":["import { CartActions } from '../actions/CartActions'\n\nexport const initialState = {\n    items: [],\n    totalItems: 0,\n    totalPrice: 0\n};\n\nexport const initializer = (initialState = initialState) => JSON.parse(localStorage.getItem('cart')) || initialState;\n\nexport const cartReducer = (state = initialState, { type, payload }) => {\n\n    switch (type) {\n        case CartActions.APPEND_ITEM: {\n\n            const newItems = state.items.find(item => item._id === payload.item._id)\n             ? state.items.map((item) => item._id === payload.item._id\n                ? {...item, quantity: item.quantity + payload.increment}: item\n                ) : [...state.items, { ...payload.item, quantity: 1 }]\n            \n            \n            const totalPrice = newItems.reduce((total, {price, quantity}) => total + price * quantity, 0);\n\n            return {\n                ...state,\n                items: newItems,\n                totalItems: state.totalItems + payload.increment,\n                totalPrice,\n            }\n        }\n        case CartActions.DECREMENT_ITEM:{\n\n            const items = state.items.find(item => item._id === payload.item._id).quantity === 1\n                ? state.items.filter((item) => item._id !== payload.item._id)\n                : state.items.map(item => item._id === payload.item._id ? {...item, quantity: item.quantity - payload.decrement} : item)\n\n            const totalPrice = items.reduce((total, {price, quantity}) => total + price * quantity, 0);\n\n            return {\n                ...state,\n                items,\n                totalPrice,\n                totalItems: state.totalItems - payload.decrement\n            }\n        }\n        case CartActions.REMOVE_ITEM: {\n\n            const itemFound = state.items.find((item) => item._id === payload._id);\n            const items = state.items.filter((item) => item._id !== payload._id);\n\n            const totalPrice = items.reduce((total, {price, quantity}) => total + price * quantity, 0);\n\n            return {\n                ...state,\n                items,\n                totalItems: state.totalItems - itemFound.quantity,\n                totalPrice\n            }\n        }\n\n        case CartActions.CLEAR_CART:\n            return initialState;\n        default:\n            return state;\n    }\n}"]},"metadata":{},"sourceType":"module"}