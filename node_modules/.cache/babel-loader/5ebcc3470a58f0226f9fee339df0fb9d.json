{"ast":null,"code":"import _objectSpread from\"/Users/alex/Downloads/GITHUB/testFront/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/alex/Downloads/GITHUB/testFront/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alex/Downloads/GITHUB/testFront/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alex/Downloads/GITHUB/testFront/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createContext,useEffect,useReducer,useContext}from'react';import{getProducts,saveProduct,removeProduct}from'../../api/productsApi';import{productsReducer,initialState}from'../reducer/productsReducer';import{productActions}from'../actions/ProductsActions';import{jsx as _jsx}from\"react/jsx-runtime\";export var ProductContext=/*#__PURE__*/createContext(initialState);export var useProducts=function useProducts(){var context=useContext(ProductContext);return context;};export var ProductProvider=function ProductProvider(_ref){var children=_ref.children;var _useReducer=useReducer(productsReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var loadProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:productActions.LOAD_PRODUCTS});_context.prev=1;_context.next=4;return getProducts();case 4:res=_context.sent;if(res.data){dispatch({type:productActions.LOAD_PRODUCTS_SUCCESS,payload:res.data});}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);dispatch({type:productActions.LOAD_PRODUCTS_ERROR,payload:_context.t0.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function loadProducts(){return _ref2.apply(this,arguments);};}();useEffect(function(){loadProducts();},[]);var addNewProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newProduct){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:productActions.LOAD_SAVE_PRODUCT});_context2.prev=1;_context2.next=4;return saveProduct(newProduct);case 4:res=_context2.sent;if(res.data){dispatch({type:productActions.LOAD_SAVE_PRODUCT_SUCCESS,payload:res.data});}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:productActions.LOAD_SAVE_PRODUCT_ERROR,payload:_context2.t0.message});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function addNewProduct(_x){return _ref3.apply(this,arguments);};}();var deleteProduct=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:productActions.DELETE_PRODUCT});_context3.prev=1;_context3.next=4;return removeProduct(id);case 4:dispatch({type:productActions.DELETE_PRODUCT_SUCCESS,payload:id});return _context3.abrupt(\"return\",true);case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);dispatch({type:productActions.DELETE_PRODUCT_ERROR,payload:_context3.t0.message});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function deleteProduct(_x2){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(ProductContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{getProducts:getProducts,addNewProduct:addNewProduct,deleteProduct:deleteProduct}),children:children});};","map":{"version":3,"sources":["/Users/alex/Downloads/GITHUB/testFront/frontend/src/context/providers/ProductsContext.js"],"names":["createContext","useEffect","useReducer","useContext","getProducts","saveProduct","removeProduct","productsReducer","initialState","productActions","ProductContext","useProducts","context","ProductProvider","children","state","dispatch","loadProducts","type","LOAD_PRODUCTS","res","data","LOAD_PRODUCTS_SUCCESS","payload","console","log","LOAD_PRODUCTS_ERROR","message","addNewProduct","newProduct","LOAD_SAVE_PRODUCT","LOAD_SAVE_PRODUCT_SUCCESS","LOAD_SAVE_PRODUCT_ERROR","deleteProduct","id","DELETE_PRODUCT","DELETE_PRODUCT_SUCCESS","DELETE_PRODUCT_ERROR"],"mappings":"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","sourcesContent":["import { createContext, useEffect, useReducer, useContext } from 'react'\nimport { getProducts, saveProduct, removeProduct } from '../../api/productsApi'\nimport { productsReducer, initialState } from '../reducer/productsReducer'\nimport { productActions } from '../actions/ProductsActions'\n\nexport const ProductContext = createContext(initialState);\n\nexport const useProducts = () => {\n    const context = useContext(ProductContext);\n    return context;\n}\n\nexport const ProductProvider = ({children}) => {\n\n    const [state, dispatch] = useReducer(productsReducer, initialState)\n\n    const loadProducts = async () => {\n        dispatch({ type: productActions.LOAD_PRODUCTS });\n        \n        try {\n            const res = await getProducts();\n        \n            if(res.data) {\n                dispatch({ \n                    type: productActions.LOAD_PRODUCTS_SUCCESS, \n                    payload: res.data \n                });\n            }\n        } catch (error) {\n            console.log(error);\n            dispatch({ \n                type: productActions.LOAD_PRODUCTS_ERROR, \n                payload: error.message,\n            });\n        }\n\n    }\n\n    useEffect(() => {\n        loadProducts();\n    },[]);\n\n    const addNewProduct = async (newProduct) => {\n\n        dispatch({ type: productActions.LOAD_SAVE_PRODUCT });\n\n        try {\n            const res = await saveProduct(newProduct);\n        \n            if(res.data) {\n                dispatch({ \n                    type: productActions.LOAD_SAVE_PRODUCT_SUCCESS, \n                    payload: res.data ,\n                })\n            }\n        } catch (error) {\n            dispatch({ \n                type: productActions.LOAD_SAVE_PRODUCT_ERROR, \n                payload: error.message,\n            });\n        }\n\n    };\n\n    const deleteProduct = async (id) => {\n\n        dispatch({\n            type: productActions.DELETE_PRODUCT,\n        })\n\n        try {\n            await removeProduct(id);\n            dispatch({\n                type: productActions.DELETE_PRODUCT_SUCCESS,\n                payload: id\n            })\n            return true;\n        } catch (error) {\n            console.log(error);\n            dispatch({\n                type: productActions.DELETE_PRODUCT_ERROR,\n                payload: error.message\n            })\n        }\n    }\n\n    return (<ProductContext.Provider value={{ ...state, getProducts, addNewProduct, deleteProduct }}>\n        {children}\n    </ProductContext.Provider>)\n};"]},"metadata":{},"sourceType":"module"}